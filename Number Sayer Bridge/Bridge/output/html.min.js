Bridge.assembly("Number Sayer Bridge",function(){"use strict";Bridge.define("Number_Sayer_Bridge.HTML",{statics:{sayers:null,currentSayingWith:!1,config:{init:function(){this.sayers=new(System.Collections.Generic.Dictionary$2(String,NumberSayer));Bridge.ready(this.start)}},NumberSayer:function(){var $t,$t1,key=System.String.concat(document.getElementById("voice").value,($t=document.getElementById("language").selectedIndex,System.Enum.toString(NumberSayer.Language,$t)));return Number_Sayer_Bridge.HTML.sayers.containsKey(key)?Number_Sayer_Bridge.HTML.sayers.get(key):($t1=new NumberSayer(document.getElementById("language").selectedIndex,document.getElementById("voice").value),Number_Sayer_Bridge.HTML.sayers.set(key,$t1),$t1)},start:function(){var $t,item;for(document.getElementById("number").onkeydown=$_.Number_Sayer_Bridge.HTML.f2,[document.getElementById("from"),document.getElementById("to")].forEach($_.Number_Sayer_Bridge.HTML.f4),document.getElementById("language").onchange=$_.Number_Sayer_Bridge.HTML.f5,document.getElementById("submit").onclick=$_.Number_Sayer_Bridge.HTML.f6,document.getElementById("count").onclick=Number_Sayer_Bridge.HTML.count,document.getElementById("language").innerHTML="",$t=Bridge.getEnumerator(System.Enum.getValues(NumberSayer.Language));$t.moveNext();)item=Bridge.cast($t.getCurrent(),NumberSayer.Language),document.getElementById("language").appendChild(Bridge.merge(document.createElement("option"),{value:System.Enum.toString(NumberSayer.Language,item),innerHTML:System.String.replaceAll(System.Enum.toString(NumberSayer.Language,item),String.fromCharCode(95),String.fromCharCode(32))}));document.getElementById("language").selectedIndex=0;Number_Sayer_Bridge.HTML.update()},count:function(){var number=document.getElementById("number"),to=bigInt(document.getElementById("to").value,10),n=bigInt(document.getElementById("from").value,10);number.value=n.toString();Number_Sayer_Bridge.HTML.submit(null,function(){bigInt(number.value,10).eq(to)||(document.getElementById("from").value=bigInt(number.value,10).add(1).toString(),Number_Sayer_Bridge.HTML.count(null))})},submit:function(arg,Callback){var sound=Number_Sayer_Bridge.HTML.NumberSayer().say(Number_Sayer_Bridge.BigDecimal.parse(document.getElementById("number").value)),bumped,$with,n,name,bump,span,idx,oldSpan,indexBump;for(document.getElementById("said").innerHTML="",bumped=0,$with=!1,n=0;n<sound.sound.length;n=n+1|0){name=sound.sound[n].name;switch(name){case"es":case"ty":case"teen":break;case"with":$with=!0;break;case"line":case"lines":$with=!1;break;default:document.getElementById("language").selectedIndex===NumberSayer.Language.Roman_Numerals&&System.String.startsWith(name,"d_")||document.getElementById("said").appendChild(Bridge.merge(document.createElement("span"),{innerHTML:" "}))}if(bump=!1,document.getElementById("language").selectedIndex===NumberSayer.Language.Roman_Numerals&&($with||System.String.startsWith(name,"line")?bump=!0:name=System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(name,"d_0_0","I"),"d_0_1","V"),"d_1_0","X"),"d_1_1","L"),"d_2_0","C"),"d_2_1","D"),"d_3_0","M")),bump)bumped=bumped+1|0;else{if(span=Bridge.merge(document.createElement("span"),{innerHTML:name}),Bridge.is(sound.sound[n],Number_Sayer_Bridge.RomanNumeralsAudio))for(idx=0;idx<sound.sound[n].lineNumbers;idx=idx+1|0)oldSpan=span,span=document.createElement("span"),span.style.borderTop="1px solid black",span.style.marginTop="1px",span.style.display="inline-block",span.appendChild(oldSpan);span.id="s"+(n-bumped|0);document.getElementById("said").appendChild(span)}}indexBump=0;sound.addOnEnded(Callback);sound.play$1(function(index){switch(sound.sound[index].name){case"with":Number_Sayer_Bridge.HTML.currentSayingWith=!0;break;case"line":case"lines":Number_Sayer_Bridge.HTML.currentSayingWith=!1}Number_Sayer_Bridge.HTML.currentSayingWith||System.String.startsWith(sound.sound[index].name,"line")?indexBump=indexBump+1|0:document.getElementById("s"+(index-indexBump|0)).style.color="red"})},update:function(){var $t,currentKnownVoices,item;for(document.getElementById("voice").innerHTML="",currentKnownVoices=NumberSayer.knownVoices.get(document.getElementById("language").selectedIndex),$t=Bridge.getEnumerator(currentKnownVoices);$t.moveNext();)item=$t.getCurrent(),document.getElementById("voice").appendChild(Bridge.merge(document.createElement("option"),{value:item.toString(),innerHTML:item.toString()}));document.getElementById("voice").appendChild(Bridge.merge(document.createElement("option"),{value:"mixed",innerHTML:"Mixed"}))}},$entryPoint:!0});var $_={};Bridge.ns("Number_Sayer_Bridge.HTML",$_);Bridge.apply($_.Number_Sayer_Bridge.HTML,{f1:function(){},f2:function(ev){Bridge.is(ev,KeyboardEvent)&&ev.keyCode===13&&Number_Sayer_Bridge.HTML.submit(null,$_.Number_Sayer_Bridge.HTML.f1)},f3:function(ev){Bridge.is(ev,KeyboardEvent)&&ev.keyCode===13&&Number_Sayer_Bridge.HTML.count(null)},f4:function(item){item.onkeydown=$_.Number_Sayer_Bridge.HTML.f3},f5:function(){Number_Sayer_Bridge.HTML.update()},f6:function(e){Number_Sayer_Bridge.HTML.submit(e,$_.Number_Sayer_Bridge.HTML.f1)}})});