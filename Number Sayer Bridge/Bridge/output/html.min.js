Bridge.assembly("Number Sayer Bridge",function(){"use strict";Bridge.define("Number_Sayer_Bridge.HTML",{statics:{sayers:null,config:{init:function(){this.sayers=new(System.Collections.Generic.Dictionary$2(String,NumberSayer));Bridge.ready(this.start)}},NumberSayer:function(){var $t,$t1,key=System.String.concat(document.getElementById("voice").value,($t=document.getElementById("language").selectedIndex,System.Enum.toString(NumberSayer.Language,$t)));return Number_Sayer_Bridge.HTML.sayers.containsKey(key)?Number_Sayer_Bridge.HTML.sayers.get(key):($t1=new NumberSayer(document.getElementById("language").selectedIndex,document.getElementById("voice").value),Number_Sayer_Bridge.HTML.sayers.set(key,$t1),$t1)},start:function(){var $t,item;for(document.getElementById("number").onkeydown=$_.Number_Sayer_Bridge.HTML.f1,[document.getElementById("from"),document.getElementById("to")].forEach($_.Number_Sayer_Bridge.HTML.f3),document.getElementById("language").onchange=$_.Number_Sayer_Bridge.HTML.f4,document.getElementById("submit").onclick=Number_Sayer_Bridge.HTML.submit,document.getElementById("count").onclick=Number_Sayer_Bridge.HTML.count,document.getElementById("language").innerHTML="",$t=Bridge.getEnumerator(System.Enum.getValues(NumberSayer.Language));$t.moveNext();)item=Bridge.cast($t.getCurrent(),NumberSayer.Language),document.getElementById("language").appendChild(Bridge.merge(document.createElement("option"),{value:System.Enum.toString(NumberSayer.Language,item),innerHTML:System.String.replaceAll(System.Enum.toString(NumberSayer.Language,item),String.fromCharCode(95),String.fromCharCode(32))}));document.getElementById("language").selectedIndex=0;Number_Sayer_Bridge.HTML.update()},count:function(){for(var to=bigInt(document.getElementById("to").value,10),sound=new Number_Sayer_Bridge.Sound.ctor,n=bigInt(document.getElementById("from").value,10);n.leq(to);n=n.add(bigInt(1)))sound.appendThis(Number_Sayer_Bridge.HTML.NumberSayer().say$1(n));sound.play()},submit:function(){var sound=Number_Sayer_Bridge.HTML.NumberSayer().say(Number_Sayer_Bridge.BigDecimal.parse(document.getElementById("number").value)),bumped,n,name,bump,span,idx,oldSpan,indexBump;for(document.getElementById("said").innerHTML="",bumped=0,n=0;n<sound.sound.length;n=n+1|0){name=sound.sound[n].name;switch(name){case"es":case"ty":case"teen":break;default:document.getElementById("language").selectedIndex===NumberSayer.Language.Roman_Numerals&&System.String.startsWith(name,"d_")||document.getElementById("said").appendChild(Bridge.merge(document.createElement("span"),{innerHTML:" "}))}if(bump=!1,document.getElementById("language").selectedIndex===NumberSayer.Language.Roman_Numerals&&(Bridge.is(sound.sound[n],Number_Sayer_Bridge.RomanNumeralsAudio)?name=System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(System.String.replaceAll(name,"d_0_0","I"),"d_0_1","V"),"d_1_0","X"),"d_1_1","L"),"d_2_0","C"),"d_2_1","D"),"d_3_0","M"):bump=!0),bump)bumped=bumped+1|0;else{if(span=Bridge.merge(document.createElement("span"),{innerHTML:name}),Bridge.is(sound.sound[n],Number_Sayer_Bridge.RomanNumeralsAudio))for(idx=0;idx<sound.sound[n].lineNumbers;idx=idx+1|0)oldSpan=span,span=document.createElement("span"),span.style.borderTop="1px solid black",span.style.marginTop="1px",span.style.display="inline-block",span.appendChild(oldSpan);span.id=System.String.concat("s",n-bumped|0);document.getElementById("said").appendChild(span)}}indexBump=0;sound.play$1(function(index){Bridge.is(sound.sound[index],Number_Sayer_Bridge.RomanNumeralsAudio)||document.getElementById("language").selectedIndex!==NumberSayer.Language.Roman_Numerals?document.getElementById(System.String.concat("s",index-indexBump|0)).style.color="red":indexBump=indexBump+1|0})},update:function(){var $t,currentKnownVoices,item;for(document.getElementById("voice").innerHTML="",currentKnownVoices=NumberSayer.knownVoices.get(document.getElementById("language").selectedIndex),$t=Bridge.getEnumerator(currentKnownVoices);$t.moveNext();)item=$t.getCurrent(),document.getElementById("voice").appendChild(Bridge.merge(document.createElement("option"),{value:item.toString(),innerHTML:item.toString()}));document.getElementById("voice").appendChild(Bridge.merge(document.createElement("option"),{value:"mixed",innerHTML:"Mixed"}))}},$entryPoint:!0});var $_={};Bridge.ns("Number_Sayer_Bridge.HTML",$_);Bridge.apply($_.Number_Sayer_Bridge.HTML,{f1:function(ev){Bridge.is(ev,KeyboardEvent)&&ev.keyCode===13&&Number_Sayer_Bridge.HTML.submit(null)},f2:function(ev){Bridge.is(ev,KeyboardEvent)&&ev.keyCode===13&&Number_Sayer_Bridge.HTML.count(null)},f3:function(item){item.onkeydown=$_.Number_Sayer_Bridge.HTML.f2},f4:function(){Number_Sayer_Bridge.HTML.update()}})});